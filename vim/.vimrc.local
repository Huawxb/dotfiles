
" Color and themes
let g:solarized_termcolors=16
color solarized
let g:airline_theme = 'powerlineish'

" Enable solarized theme
" syntax enable
" set background=dark
" colorscheme solarized

" Configure airline interface
let g:airline#extensions#tabline#enabled = 1
let g:airline#extensions#tabline#left_sep = ' '
let g:airline#extensions#tabline#left_alt_sep = '|'
let g:airline#extensions#tabline#formatter = 'unique_tail'
let g:airline_section_b = '%{getcwd()}'
let g:airline_section_c = '%t'

" Dont save .swp file
set nobackup

" Automatically use the system clipboard for copy and paste.
set clipboard=unnamedplus

" Enables mouse in all modes to scroll in tmux
set mouse=a

" Highlight all search matches
:set hlsearch

" Press Space to turn off highlighting and clear any message already displayed.
:nnoremap <silent> <Space> :nohlsearch<Bar>:echo<CR>

" search for visually selected text
vnoremap // y/<C-R>"

" Using standard editor shortcuts in Vim

set nu
:map <C-a> GVgg
":map <C-n> :enew
:map <C-o> :e . <Enter>
:map <C-s> :w <Enter>
:map <C-c> y
:map <C-v> p
:map <C-x> <Delete>
:map <C-z> u
":map <C-t> :tabnew <Enter>
:map <C-i> >>
:map <C-q> :q! <Enter>
:map <C-w> :bp <BAR> bd! #<Enter>
":map <C-f> /
:map <F3> n
:map <C-h> :%s/
:map <S-t> vat
:map <S-T> vit
:map <S-{> vi{
:map <S-(> vi(
:map <S-[> vi[

" NerdTree config
let NERDTreeShowHidden=1
let NERDTreeQuitOnOpen=0

" NerdTree-tabs config
map <Leader>n <plug>NERDTreeTabsToggle<CR>
let g:nerdtree_tabs_open_on_console_startup=1
let g:nerdtree_tabs_open_on_gui_startup=1
let g:nerdtree_tabs_open_on_new_tab=1


" Tab two spaces
set tabstop=2 softtabstop=2 expandtab shiftwidth=2 smarttab

" Tab navigation like Firefox.
nnoremap <C-S-tab> :bprevious<CR>
nnoremap <C-tab>   :bnext<CR>
nnoremap <C-t>     :enew<CR>
inoremap <C-S-tab> <Esc>:bprevious<CR>i
inoremap <C-tab>   <Esc>:bnext<CR>i
inoremap <C-t>     <Esc>:enew<CR>


" !WORKAROUND! Switch tab with ctrl + j or k cause its not support in tmux
nnoremap <C-j> :bprevious<CR>
nnoremap <C-k> :bnext<CR>

" CtrlSF config
nmap     <C-F>f <Plug>CtrlSFPrompt
vmap     <C-F>f <Plug>CtrlSFVwordPath
vmap     <C-F>F <Plug>CtrlSFVwordExec
nmap     <C-F>n <Plug>CtrlSFCwordPath
nmap     <C-F>p <Plug>CtrlSFPwordPath
nnoremap <C-F>o :CtrlSFOpen<CR>
nnoremap <C-F>t :CtrlSFToggle<CR>
inoremap <C-F>t <Esc>:CtrlSFToggle<CR>
let g:ctrlsf_default_root = 'project'

" delete without yanking
nnoremap d "_d
vnoremap d "_d

" replace currently selected text with default register
" without yanking it
vnoremap p "_dP

" Mappings to move lines
nnoremap <A-j> :m .+1<CR>==
nnoremap <A-k> :m .-2<CR>==
inoremap <A-j> <Esc>:m .+1<CR>==gi
inoremap <A-k> <Esc>:m .-2<CR>==gi
vnoremap <A-j> :m '>+1<CR>gv=gv
vnoremap <A-k> :m '<-2<CR>gv=gv


" should markdown preview get shown automatically upon opening markdown buffer
let g:livedown_autorun = 1

" should the browser window pop-up upon previewing
let g:livedown_open = 1

"##### auto fcitx  ###########
let g:input_toggle = 1
function! Fcitx2en()
   let s:input_status = system("fcitx-remote")
   if s:input_status == 2
      let g:input_toggle = 1
      let l:a = system("fcitx-remote -c")
   endif
endfunction

function! Fcitx2zh()
   let s:input_status = system("fcitx-remote")
   if s:input_status != 2 && g:input_toggle == 1
      let l:a = system("fcitx-remote -o")
      let g:input_toggle = 0
   endif
endfunction

set ttimeoutlen=150
"退出插入模式
autocmd InsertLeave * call Fcitx2en()
"进入插入模式
autocmd InsertEnter * call Fcitx2zh()
" FIXME workaround for vim in tmux with ctrl+c
inoremap <C-c> <Esc>
" Timeout 
:set timeout timeoutlen=1000 ttimeoutlen=100
"##### auto fcitx end ######

" Shift + jkhl will go one window left, etc.
nmap <S-h> :wincmd h<CR>
nmap <S-j> :wincmd j<CR>
nmap <S-k> :wincmd k<CR>
nmap <S-l> :wincmd l<CR>
